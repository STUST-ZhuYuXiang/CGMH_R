"100"+100
library(readr)
dataset <- read_csv(NULL)
View(dataset)
library(readr)
Basic <- read_csv("C:/Users/yjtseng/Dropbox/CGU/CGMH_R/Basic.csv")
View(Basic)
Basic <- read_csv("C:/Users/yjtseng/Dropbox/CGU/CGMH_R/Basic.csv")
View(Basic)
Basic <- read_csv("Basic.csv")
DiagSum <- read_csv("DiagSum.csv")
EMDiag <- read_csv("EMDiag.csv")
OutDiag <- read_csv("OutDiag.csv")
View(DiagSum)
Basic <- read_csv("Basic.csv")
DiagSum <- read_csv("DiagSum.csv")
View(DiagSum)
EMDiag <- read_csv("EMDiag.csv")
OutDiag <- read_csv("OutDiag.csv")
EMDiag$`ÿé™¢å€`
EMDiag <- read_csv("EMDiag.csv")
OutDiag <- read_csv("OutDiag.csv")
sample(Basic$æ­¸æˆ¶ä»£è™Ÿ,1000)
?sample
sample(Basic$æ­¸æˆ¶ä»£è™Ÿ,100)
sample(Basic$æ­¸æˆ¶ä»£è™Ÿ,500)
library(dplyr)
DiagSum %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)
IDList<-sample(Basic$æ­¸æˆ¶ä»£è™Ÿ,500)
library(dplyr)
DiagSum %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)
DiagSum %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)
EMDiag %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)
OutDiag %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)
Lab <- read_csv("Lab.csv")
Lab %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)
DiagSum %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList) %>% write.csv("DiagSumS.csv",row.names = F)
library(dplyr)
Basic %>%  filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList) %>% write.csv("BasicS.csv",row.names = F)
DiagSum %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList) %>% write.csv("DiagSumS.csv",row.names = F)
EMDiag %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)  %>% write.csv("EMDiagS.csv",row.names = F)
OutDiag %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)  %>% write.csv("OutDiagS.csv",row.names = F)
Lab %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)  %>% write.csv("LabS.csv",row.names = F)
BasicS <- read_csv("BasicS.csv")
DiagSumS <- read_csv("DiagSumS.csv")
EMDiagS <- read_csv("EMDiagS.csv")
OutDiagS <- read_csv("OutDiagS.csv")
LabS <- read_csv("LabS.csv")
Basic %>%  filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList) %>% write.csv("BasicS.csv",row.names = F,fileEncoding = "UTF8")
BasicS <- read_csv("BasicS.csv")
Basic %>%  filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList) %>% write.csv("BasicS.csv",row.names = F,fileEncoding = "UTF8")
DiagSum %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList) %>% write.csv("DiagSumS.csv",row.names = F,fileEncoding = "UTF8")
EMDiag %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)  %>% write.csv("EMDiagS.csv",row.names = F,fileEncoding = "UTF8")
OutDiag %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)  %>% write.csv("OutDiagS.csv",row.names = F,fileEncoding = "UTF8")
Lab %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)  %>% write.csv("LabS.csv",row.names = F,fileEncoding = "UTF8")
BasicS <- read_csv("BasicS.csv")
DiagSumS <- read_csv("DiagSumS.csv")
EMDiagS <- read_csv("EMDiagS.csv")
OutDiagS <- read_csv("OutDiagS.csv")
DiagSumS <- read_csv("DiagSumS.csv")
DiagSumS <- read_csv("DiagSumS.csv")
DiagSumS
DiagSumS <- read_csv("DiagSumS.csv")
DiagSumS
DiagSumS$é™¢å€
View(BasicS)
View(EMDiag)
EMDiagS <- read_csv("EMDiagS.csv",progress = F)
str(EMDiagS)
ymd(EMDiagS$è¼¸å…¥æ—¥æœŸ)
library(lubridate)
ymd(EMDiagS$è¼¸å…¥æ—¥æœŸ)
EMDiagS$
EMDiagS$ä¸»è¨ºæ–·
EMDiagS$ç–¾ç—…ç¢¼
grep(EMDiagS,'250')
grep('250',EMDiagS$ç–¾ç—…ç¢¼)
grepl('250',EMDiagS$ç–¾ç—…ç¢¼)
grep('250',EMDiagS$ç–¾ç—…ç¢¼)
grep('250',EMDiagS$ç–¾ç—…ç¢¼,value=T)
grep('^250',EMDiagS$ç–¾ç—…ç¢¼,value=T)
View(EMDiagS)
View(OutDiagS)
View(LabS)
Lab %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)  %>% write.csv("LabS.csv",row.names = F,fileEncoding = "UTF8")
LabS <- read_csv("LabS.csv")
OptOrder <- read_csv("OptOrder.csv")
OptOrder %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)  %>% write.csv("OptOrderS.csv",row.names = F,fileEncoding = "UTF8")
OptOrder %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)
OptOrder <- read_csv("OptOrder.csv")
OutDiagS <- read_csv("OutDiagS.csv")
OutDiag %>% filter(æ­¸æˆ¶ä»£è™Ÿ %in% IDList)  %>% write.csv("OptDiagS.csv",row.names = F,fileEncoding = "UTF8")
OptDiagS <- read_csv("OptDiagS.csv")
inner_join(OptOrder,OptDiagS)
inner_join(OptOrder,OptDiagS,by=c( "æ­¸æˆ¶ä»£è™Ÿ", "é–€è¨ºè™Ÿ"))
View(OptOrder)
library(readr)
DiagSumS <- read_csv("DiagSumS.csv") #è‡ªè¡Œè¼‰å…¥
View(DiagSumS)
library(dplyr) ##è¼‰å…¥
DiagSumS$è¨ºæ–·é¡åˆ¥1
select1<-
select(DiagSumS,å¹´é½¡,starts_with("è¨ºæ–·é¡åˆ¥"),
end_with("æ—¥æœŸ"))
select1<-
select(DiagSumS,å¹´é½¡,starts_with("è¨ºæ–·é¡åˆ¥"),
ends_with("æ—¥æœŸ"))
select1
select3<-
select(NBA1516,æ€§åˆ¥:ä¾†æºåˆ¥,-å¦Šå¨ æœŸ)
select3<-
select(DiagSumS,æ€§åˆ¥:ä¾†æºåˆ¥,-å¦Šå¨ æœŸ)
head(select3,3)
filter(DiagSumS,ä¾†æºåˆ¥>"E")
knitr::kable(head(filter(DiagSumS,ä½é™¢å¤©æ•¸ > 50)))
DiagSumS %>% select(è¨ºæ–·é¡åˆ¥1)
summarise(DiagSumS,
nRecord=n(),
nID=n_distinct(æ­¸æˆ¶ä»£è™Ÿ),
nSource=n_distinct(ä¾†æºåˆ¥))
filter1<-filter(DiagSumS,ä½é™¢å¤©æ•¸ > 50)
summarise(filter1,
nRecord=n(),
nID=n_distinct(æ­¸æˆ¶ä»£è™Ÿ),
meanAge=mean(å¹´é½¡))
summarise(filter1,
nRecord=n(),
nID=n_distinct(æ­¸æˆ¶ä»£è™Ÿ),
meanAge=mean(å¹´é½¡),
nM=sum(æ€§åˆ¥=="M"))
filter1
group_by(DiagSumS,æ€§åˆ¥)%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,æ€§åˆ¥)%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
DiagSumS%>%group_by(æ€§åˆ¥)%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots="æ€§åˆ¥")%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots=æ€§åˆ¥)%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,é™¢å€,æ€§åˆ¥)%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots=é™¢å€,æ€§åˆ¥)%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots=é™¢å€,.dots=æ€§åˆ¥)%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots=c("é™¢å€","æ€§åˆ¥")%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
```
groups<-c("é™¢å€","æ€§åˆ¥")
group_by(DiagSumS,.dots=groups%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
```
groups<-c("é™¢å€","æ€§åˆ¥")
group_by(DiagSumS,.dots=groups%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
```
group_by_(DiagSumS,.dots=groups%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
```
group_by(DiagSumS,.dots=groups) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
groups<-c("é™¢å€","æ€§åˆ¥")
group_by(DiagSumS,.dots=groups) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by_(DiagSumS,.dots=groups) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
DiagSumS$é™¢å€
group_by_(DiagSumS,.dots=groups) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by_(DiagSumS,get(é™¢å€)) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by_(DiagSumS,groups) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by_(DiagSumS,iconv(groups), to ="UTF-8") %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by_(DiagSumS,iconv(groups, to ="UTF-8")) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by_(DiagSumS,.dots=iconv(groups, to ="UTF-8")) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by_(DiagSumS,.dots=é™¢å€) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by_(DiagSumS,.dots=æ€§åˆ¥) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group1<-group_by(DiagSumS,.dots=æ€§åˆ¥)%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots=æ€§åˆ¥)%>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by_(DiagSumS,.dots=æ€§åˆ¥) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots=æ€§åˆ¥) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots=é™¢å€) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots=é™¢å€,æ€§åˆ¥) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots=é™¢å€,.dots=æ€§åˆ¥) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots=.(é™¢å€,æ€§åˆ¥)) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots=list(é™¢å€,æ€§åˆ¥)) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumS,.dots=c("é™¢å€","æ€§åˆ¥")) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by_(DiagSumS,.dots=c("é™¢å€","æ€§åˆ¥")) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
dots <- lapply(c("é™¢å€","æ€§åˆ¥"), as.symbol)
group_by(DiagSumS,.dots=dots) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
dots <- lapply(c("é™¢å€","æ€§åˆ¥"), as.symbol)
group_by(DiagSumS,.dots=dots) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
dots
df <-  data.frame(
asihckhdoydk = sample(LETTERS[1:3], 100, replace=TRUE),
a30mvxigxkgh = sample(LETTERS[1:3], 100, replace=TRUE),
value = rnorm(100)
)
# Columns you want to group by
grp_cols <- names(df)[-3]
# Convert character vector to list of symbols
dots <- lapply(grp_cols, as.symbol)
dots
group_by_(DiagSumS,.dots=dots) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
dots <- lapply(c("é™¢å€","æ€§åˆ¥"), as.symbol)
group_by_(DiagSumS,.dots=dots) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
DiagSumE <- rename(DiagSumS, Hosp = é™¢å€,Gender=æ€§åˆ¥)
group_by_(DiagSumE,Hosp,Gender) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
group_by(DiagSumE,Hosp,Gender) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸))
arrange(DiagSumS,
desc(ä½é™¢å¤©æ•¸),
desc(å¹´é½¡))
group_by(DiagSumE,Hosp,Gender) %>%
summarise(nRecord=n(),
meanAge=mean(å¹´é½¡),
meanHos=mean(ä½é™¢å¤©æ•¸)) %>%
arrange(desc(meanHos))
DiagSumE[1:5,1:2]
arrange(DiagSumS,ä½é™¢å¤©æ•¸) %>% select(é™¢å€,ä½é™¢å¤©æ•¸)
arrange1<-arrange(DiagSumS,ä½é™¢å¤©æ•¸) %>% select(é™¢å€,ä½é™¢å¤©æ•¸)
